name: GitHub Actions Demo
on: [push]
jobs:
  job1:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Check out repository code
        uses: actions/checkout@v3
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - run: echo "ğŸ This job's status is ${{ job.status }}."
  job2:
    needs: job1
    runs-on: ubuntu-latest
    steps:
        uses: actions/checkout@v3
      - name: Installing Docker
      - run: sudo apt-get -y install docker-ce docker-ce-cli containerd.io docker-compose-plugin
      - name: Installing AWS CLI
      - run: |
          curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
          unzip awscliv2.zip
          sudo ./aws/install
  Build-Image:
    runs-on: ubuntu-latest
    steps:
        uses: actions/checkout@v3
      - run: docker build -t app ${{ github.workspace }}
  Push-Image-ECR:
    runs-on: ubuntu-latest
    steps:
        uses: actions/checkout@v3
      - run: echo 'Pushing Image to ECR'
  Kill-Existing-Containers:
    runs-on: ubuntu-latest
    steps:
        uses: actions/checkout@v3
      - run: aws s3 ls
      - run: echo containers killed

